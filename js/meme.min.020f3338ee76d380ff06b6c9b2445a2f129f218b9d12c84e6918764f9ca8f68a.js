const throttle=(b,c)=>{let d,e,a;return function(){const f=this,g=arguments;d?(clearTimeout(e),e=setTimeout(function(){Date.now()-a>=c&&(b.apply(f,g),a=Date.now())},Math.max(c-(Date.now()-a),0))):(b.apply(f,g),a=Date.now(),d=!0)}},delayTime=420;window.location.host=="lamb.tw"&&window.location.protocol!="https:"&&(window.location.protocol="https"),window.addEventListener('DOMContentLoaded',b=>{const a=document.querySelector('.header');if(a){const b=window.getComputedStyle(a,null).getPropertyValue('height');document.documentElement.style.setProperty('--header-height',b)}},{once:!0}),window.addEventListener("DOMContentLoaded",b=>{const a=document.getElementById('back-to-top');a!==null&&window.addEventListener('scroll',throttle(function(){window.scrollY>100?a.classList.add('show'):a.classList.remove('show')},delayTime))},{once:!0});const userPrefers=localStorage.getItem('theme');userPrefers==='dark'?changeModeMeta('dark'):userPrefers==='light'&&changeModeMeta('light'),window.matchMedia('(prefers-color-scheme: dark)').addListener(a=>{changeMode()}),window.addEventListener("DOMContentLoaded",b=>{changeMode();const a=document.getElementById('theme-switcher');a&&a.addEventListener('click',a=>{a.preventDefault(),getCurrentTheme()=="dark"?changeModeMeta('light'):changeModeMeta('dark'),changeMode(),storePrefers()})},{once:!0}),window.addEventListener('storage',function(a){if(a.key!=='theme')return;a.newValue==='dark'?changeModeMeta('dark'):changeModeMeta('light'),changeMode()});function getCurrentTheme(){return JSON.parse(window.getComputedStyle(document.documentElement,null).getPropertyValue("--theme-name"))}function changeModeMeta(a){document.documentElement.setAttribute('data-theme',a)}function changeMode(){const a=getCurrentTheme()==='dark',b=a?'#16171d':'#fff';if(document.querySelector('meta[name="theme-color"]').setAttribute('content',b),typeof mermaidConfig!='undefined'){const b=document.querySelectorAll('.mermaid');b.forEach(a=>{a.getAttribute('data-processed')?(a.removeAttribute('data-processed'),a.innerHTML=a.getAttribute('data-graph')):a.setAttribute('data-graph',a.textContent)}),a?(mermaidConfig.theme='dark',mermaid.initialize(mermaidConfig),mermaid.init()):(mermaidConfig.theme='default',mermaid.initialize(mermaidConfig),mermaid.init())}}function storePrefers(){window.localStorage.setItem('theme',getCurrentTheme())}window.addEventListener("DOMContentLoaded",d=>{const a='複製',c='已複製';document.querySelectorAll('.post-body > pre').forEach(a=>{let b=document.createElement('div');a.parentNode.replaceChild(b,a),b.appendChild(a)});function b(b){const d=document.querySelectorAll('table.lntable, .highlight > pre, .post-body > div > pre');d.forEach(e=>{var f;e.parentNode.style.position='relative';const d=document.createElement('button');d.className='copy-button',d.type='button',d.innerText=a,e.classList.contains('lntable')?(f=e.querySelectorAll('.lntd')[1]):(f=e.querySelector('code')),d.addEventListener('click',()=>{b.writeText(f.innerText).then(()=>{d.blur(),d.innerText=c,setTimeout(()=>{d.innerText=a},1e3)}).catch(a=>{d.innerText='Error',console.error(a)})}),e.appendChild(d),e.parentNode.addEventListener('mouseover',()=>{d.style='visibility: visible; opacity: 1'}),e.parentNode.addEventListener('mouseout',()=>{d.style='visibility: hidden; opacity: 0'})})}if(navigator&&navigator.clipboard)b(navigator.clipboard);else{const a=document.createElement('script');a.src='https://cdn.jsdelivr.net/npm/clipboard-polyfill@2.8.6/dist/clipboard-polyfill.min.js',a.defer=!0,a.onload=function(){b(clipboard)},document.head.appendChild(a)}},{once:!0}),window.addEventListener("DOMContentLoaded",d=>{let b=null;const a=instantsearch({appId:"DOZI459Z86",apiKey:"6b5eb2945141990b50c4739e98e29257",indexName:"lamb_home"});a.addWidget({init:function(a){const b=a.helper,c=document.getElementById("search-input");c.addEventListener("input",function(a){b.setQuery(a.currentTarget.value).search()})}}),a.addWidget({render:function(g){let e=g.state.query;if(!e)return;const f=g.results.hits;let d=document.querySelector(".main-inner")||document.querySelector("main.home"),h=[];while(d.firstChild)h.push(d.firstChild),d.removeChild(d.firstChild);b||(b=h);let a=document.createElement("h1");a.id="search-results",a.className="list-title",f.length==0?a.textContent="沒有找到關於「{}」的結果".replace("{}",e):f.length==1?a.textContent="找到 1 條關於「{}」的結果".replace("{}",e):a.textContent="找到 13579 條關於「{}」的結果".replace("{}",e).replace("13579",f.length),d.appendChild(a),document.title=a.textContent;let i=document.getElementById("search-result");for(let b of f){let a=i.content.cloneNode(!0);a.querySelector(".summary-title-link").href=a.querySelector(".read-more-link").href=b.url,a.querySelector(".summary-title-link").textContent=b.title,a.querySelector(".summary").textContent=c(b.summary,70),d.appendChild(a)}a.scrollIntoView(!0)}}),a.start();function c(d,e){let a,b="",c=0,f=/(\S+)(\s*)/g;while(a=f.exec(d))if(c++,c<=e)b+=a[0];else{let c=a[1][a[1].length-1],d=a[2][0];if(/[.?!"]/.test(c)||d=="\n"){b+=a[1];break}b+=a[0]}return b}},{once:!0})